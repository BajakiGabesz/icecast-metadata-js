(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{18:function(e,t,a){e.exports={visitStation:"Player_visitStation__2xKeH",playerText:"Player_playerText__Cw7Rh",metadata:"Player_metadata__3j7ae",playPause:"Player_playPause__3bmnX",player:"Player_player__1vYfQ",stationRadio:"Player_stationRadio__10mpt",button:"Player_button__297uW",link:"Player_link__2k87w"}},22:function(e,t,a){e.exports={about:"About_about__2v-0B",headerLink:"About_headerLink__3aZVt",mainLink:"About_mainLink__1aSaU",subLink:"About_subLink__n5KCY",description:"About_description__3WN3o",disclaimer:"About_disclaimer__2gOk6"}},23:function(e,t,a){e.exports={station:"StationSelector_station__3a44c",stationRadio:"StationSelector_stationRadio__1FTGQ",stationLabel:"StationSelector_stationLabel__1DbUR",stationName:"StationSelector_stationName__1hB_K",stationDescription:"StationSelector_stationDescription__36TBn",codecInfo:"StationSelector_codecInfo__JZjFy"}},34:function(e,t,a){e.exports={header:"App_header__3ZZ1n",footer:"App_footer__29Fsv",spectrum:"App_spectrum__MkN9s"}},58:function(e){e.exports=JSON.parse('[{"name":"DSMRad.io ISICS All","description":"Des Moines IA, Police Scanner","link":"https://dsmrad.io","endpoint":"https://dsmrad.io/stream/isics-all","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy"]},{"name":"DSMRad.io SARA All","description":"Des Moines IA, Police Scanner","link":"https://dsmrad.io","endpoint":"https://dsmrad.io/stream/sara-all","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy"]},{"name":"Dance Wave!","description":"All Dance from 2000. Global dance radio station. The hottest Dance and Club Music from across the Planet!","link":"https://dancewave.online/","endpoint":"https://dancewave.online/dance.mp3","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Dance Wave!","description":"","link":"https://dancewave.online/","endpoint":"https://dancewave.online/dance.aac","codec":"AAC+","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Dance Wave!","description":"","link":"https://dancewave.online/","endpoint":"https://dancewave.online/dance.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg","icestats"]},{"name":"Dance Wave!","description":"","link":"https://dancewave.online/","endpoint":"https://dancewave.online/dance.opus","codec":"Opus","metadataTypes":["ogg"],"statsSources":["ogg","icestats"]},{"name":"Dance Wave Retro!","description":"All Dance before 2000!","link":"https://retro.dancewave.online/","endpoint":"https://retro.dancewave.online/retrodance.mp3","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Dance Wave Retro!","description":"All Dance before 2000!","link":"https://retro.dancewave.online/","endpoint":"https://retro.dancewave.online/retrodance.opus","codec":"Opus","metadataTypes":["ogg"],"statsSources":["ogg","icestats"]},{"name":"90.9 Jazzy r\xe1di\xf3 - Jazzy Cool","description":"The only Hungarian radio playing soul, swing, lounge and jazz beside smooth jazz hits.","link":"https://jazzy.hu/","endpoint":"https://s04.diazol.hu:9530/live.mp3","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","sevenhtml"]},{"name":"90.9 Jazzy r\xe1di\xf3 - Jazzy Groove","description":"","link":"https://jazzy.hu/","endpoint":"https://s04.diazol.hu:9510/live.mp3","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","sevenhtml"]},{"name":"90.9 Jazzy r\xe1di\xf3 - Jazzy Soul","description":"","link":"https://jazzy.hu/","endpoint":"https://s04.diazol.hu:9520/live.mp3","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","sevenhtml"]},{"name":"Nightride FM","description":"Synthwave / Retrowave / Outrun","link":"https://nightride.fm","endpoint":"https://stream.nightride.fm/nightride.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"Darksynth Radio","description":"Darksynth / Cyberpunk / Horror","link":"https://nightride.fm","endpoint":"https://stream.nightride.fm/darksynth.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"EBSM","description":"EBSM / Industrial / Clubbing","link":"https://nightride.fm","endpoint":"https://stream.nightride.fm/ebsm.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"REKT","description":"DnB / Dubstep / Electronic","link":"https://nightride.fm","endpoint":"https://stream.nightride.fm/rekt.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"Rektory","description":"Fallout / 1930s / Reefer Jazz","link":"https://nightride.fm","endpoint":"https://stream.nightride.fm/rektory.ogg","codec":"Vorbis","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"Jazz4ever","description":"An accurate selection of Jazz, Fusion and Funky-Jazz with a sprinkle of \\"sparkly\\" Smooth Jazz.","link":"http://jazz4ever.net/","endpoint":"https://streamingv2.shoutcast.com/Jazz4ever","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Smooth Jazz Smooth Wave","description":"","link":"http://www.smoothazzwavesarasota.com","endpoint":"https://streaming510.radionomy.com/SmoothJazzSmoothWave","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Smooth Jazz Zone","description":"","link":"","endpoint":"https://streaming510.radionomy.com/SmoothJazzZone","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Bolerospara Enamorarse","description":"A\xf1oranzas por la melodias de el radio de los 40 s. 50 s y 60 s.","link":"http://bolerosparaenamorarse.playtheradio.com","endpoint":"https://streaming510.radionomy.com/boleros-para-enamorarse","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Radio Energy","description":"","link":"https://www.radioenergy.bg/","endpoint":"https://play.global.audio/nrj.opus","codec":"Opus","metadataTypes":["ogg"],"statsSources":["ogg"]},{"name":"Radioparty.pl","description":"Techno, Dance, Club, Hands Up, House, Trance. Najlepsza klubowa muzyka w sieci. The best radio with club music.","link":"https://radioparty.pl/kanalglowny.html","endpoint":"https://s2.radioparty.pl:8000/stream","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - House","description":"","link":"https://radioparty.pl/kanalhouse.html","endpoint":"https://s1.radioparty.pl:8000/house","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - Trance","description":"","link":"https://radioparty.pl/kanaltrance.html","endpoint":"https://s2.radioparty.pl:8015/trance","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - Vocal Trance","description":"","link":"https://radioparty.pl/kanalvtrance.html","endpoint":"https://s2.radioparty.pl:8015/vocaltrance","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - DJ Mixes","description":"","link":"https://radioparty.pl/kanaldjmixes.html","endpoint":"https://s1.radioparty.pl:8000/djmixes","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - Energy 2000","description":"","link":"https://radioparty.pl/kanalenergy2000.html","endpoint":"https://s1.radioparty.pl:8000/energy2000","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Radioparty.pl - Energy 2000","description":"","link":"https://radioparty.pl/kanalenergy2000.html","endpoint":"https://s2.radioparty.pl:8040/energy2000","codec":"AAC+","metadataTypes":["icy"],"statsSources":["icy","icestats","stats","sevenhtml"]},{"name":"Metro DANCE! Radio","description":"Metro Dance Radio - home station of the morning show BODRA SMYANA (Cool Shift) broadcasted live every weekday morning 7 - 11 am and rebroadcasted through all Metro Cast Stations as well as on the major local FM outlets in Bulgaria.","link":"https://dab.bg/radiochannel/metro/","endpoint":"http://eu1.reliastream.com:7017/MDR","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Radio Paradise Main","description":"RP is a blend of many styles and genres of music, carefully selected and mixed by two real human beings.","link":"https://radioparadise.com/","endpoint":"https://stream.radioparadise.com/flacm","codec":"FLAC","metadataTypes":["icy"],"statsSources":["icy","ogg"]},{"name":"Radio Paradise Mellow","description":"","link":"https://radioparadise.com/","endpoint":"https://stream.radioparadise.com/mellow-flacm","codec":"FLAC","metadataTypes":["icy"],"statsSources":["icy","ogg"]},{"name":"Radio Paradise Rock","description":"","link":"https://radioparadise.com/","endpoint":"https://stream.radioparadise.com/rock-flacm","codec":"FLAC","metadataTypes":["icy"],"statsSources":["icy","ogg"]},{"name":"Radio Paradise World/Etc","description":"","link":"https://radioparadise.com/","endpoint":"https://stream.radioparadise.com/world-etc-320","codec":"AAC","metadataTypes":["icy"],"statsSources":["icy"]},{"name":"Sama Radio Senegal","description":"Good Vibes from Senegal West Africa! Sama Radio Dakar Senegal cr\xe9\xe9e en Ao\xfbt 2013. Avec un groupe de jeunes ambitieux S\xe9n\xe9galais elle est aujourd hui la premi\xe8re cha\xeene ind\xe9pendante et qui r\xe9sume l ensemble du Paysage m\xe9diatique S\xe9n\xe9galais.","link":"https://www.sunufm.com/samaradio/","endpoint":"https://streamingv2.shoutcast.com/SamaRadio","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"BFC Classique","description":"L\'autre climat musical en Bourgogne-Franche-Comt\xe9","link":"https://bfc-classique.fr/","endpoint":"https://streaming510.radionomy.com/BFC-CLASSIQUE","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Radio-Mozart","description":"All Mozart all the time / Ce n est pas de la radio c est du Mozart !","link":"http://www.radiomozart.com","endpoint":"https://streaming510.radionomy.com/Radio-Mozart","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"ABC Piano","description":"Only Piano Classical Music with Bach, Mozart, Beethoven, Rachmaninov, Debussy, Chopin, ...","link":"https://www.radionomy.com/en/radio/abc-Piano","endpoint":"https://streamingv2.shoutcast.com/ABC-Piano","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Atmospheres Radio","description":"Music by students, staff and friends of the Royal Welsh College of Music and Drama","link":"https://streaming.galaxywebsolutions.com/AudioPlayer/9040","endpoint":"https://streaming.galaxywebsolutions.com:9040/stream","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy"]},{"name":"HAWK Radio - Hilbert College","description":"Modern Music from Hip Hop to Rock!","link":"https://www.hilbert.edu/academics/undergraduate-programs/dmac/hawk-radio","endpoint":"https://streamingv2.shoutcast.com/HAWK-Radio-Hilbert-College?icy=http","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Jive Nation Radio","description":"Dance Rock / Disco / Dance - Clubbing","link":"http://www.jivenation.be/","endpoint":"https://streamingv2.shoutcast.com/jive-nation-radio","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Radio Cumbernauld","description":"Broadcasting local news and music from Cumbernauld Scotland","link":"https://www.radiocumbernauld.uk/","endpoint":"https://audio-edge-p6jke.yyz.d.radiomast.io/ebca0c3d-4178-4386-88a1-4db6b7d9e291","codec":"AAC","metadataTypes":["icy"],"statsSources":["icy"]},{"name":"AIFR Alverno Inferno Free Radio","description":"Alverno College On-Line Radio Station","link":"http://www-staging.alverno.edu/technology/mediahub/aifr.php","endpoint":"https://pavo.prostreaming.net:8022/stream","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"TheIndieBlend","description":"Music. Discovery. Unleashed. Here\'s an Indie station that mixes it up -- pulling only the best songs played by KCRW-FM Los Angeles DJ Sticky/past WVUM-FM Miami DJ Tom Jackson Radio Eins 95.8 FM Berlin","link":"http://theindieblend.playtheradio.com/","endpoint":"https://streaming307.radionomy.com/TheIndieBlend?icy=http","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"CiTR Live","description":"CiTR 101.9FM/Discorder Magazine is the campus radio station and magazine of the University of British Columbia-Vancouver, broadcasting from traditional unceded Musqueam territory and streaming online","link":"https://www.citr.ca/","endpoint":"https://stream.kanefm.com:1037/listen","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Lo Nuestro 102.1","description":"La mejor m\xfasica t\xedpica de Panam\xe1.","link":"https://www.fmlonuestro.com/","endpoint":"https://www.streaming507.net:8136/stream","codec":"AAC","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"CineMusik","description":"","link":"https://cinemusik.playtheradio.com","endpoint":"https://streamingv2.shoutcast.com/CineMusik","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"ChillOutWorld","description":"Best Chill-Out Radio.","link":"http://radioworld66.com","endpoint":"https://streaming510.radionomy.com/ChillOutWorld","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Andean Music","description":"Folklore Andean Acoustic Electronic Underground","endpoint":"https://streamingv2.shoutcast.com/andeanmusic?icy=http","codec":"MP3","metadataTypes":["icy"],"statsSources":["icy","icestats"]},{"name":"Pure Rock FM 89/WONC","description":"Student-run radio from North Central College, Naperville, IL, USA","link":"https://www.wonc.org/","endpoint":"http://webcast.wonc.org:8000/wonclive-160s-opus.ogg","codec":"Opus","metadataTypes":["ogg"],"statsSources":["ogg","icestats"]},{"name":"TheRadio.CC","description":"The Radio CC - Euer Creative Commons-Webradio","link":"https://theradio.cc","endpoint":"http://stream.theradio.cc:8000/trcc-stream.opus","codec":"Opus","metadataTypes":["ogg"],"statsSources":["ogg","icestats"]}]')},67:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n,i=a(11),r=a.n(i),s=a(56),c=a.n(s),o=(a(67),a(0)),u=a.n(o),d=a(7),p=a(14),l=a(57),h=a(18),m=a.n(h),y=a(6),f="Icecast Metadata JS Demo",b=function(e){var t=e.station,a=e.playing,n=e.toggle,i=e.metadata,r=i.StreamTitle||i.TITLE;return document.title=r?"".concat(r," | ").concat(f):f,Object(y.jsxs)("div",{className:m.a.player,children:[Object(y.jsx)("button",{disabled:!t,className:m.a.button,onClick:n,children:a?Object(y.jsx)("svg",{className:m.a.playPause,viewBox:"0 0 450 525",children:Object(y.jsx)("path",{fill:"#999",d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"})}):Object(y.jsx)("svg",{className:m.a.playPause,viewBox:"0 0 450 525",children:Object(y.jsx)("path",{fill:"#999",d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})})}),Object(y.jsxs)("div",{className:m.a.playerText,children:[Object(y.jsx)("div",{className:m.a.metadata,children:"object"===typeof i?i.StreamTitle||(i.ARTIST?"".concat(i.ARTIST," - ").concat(i.TITLE):i.TITLE)||i.VENDOR_STRING:i}),(null===t||void 0===t?void 0:t.link)&&Object(y.jsxs)("div",{className:m.a.visitStation,children:["Visit this station at ",Object(y.jsx)("a",{className:m.a.link,href:t.link,target:"_blank",rel:"noopener noreferrer",children:t.name})]})]})]})},g=a(23),_=a.n(g),v=function(e){var t=e.id,a=e.station,n=e.changeStation;return Object(y.jsxs)("div",{className:_.a.station,children:[Object(y.jsx)("input",{type:"radio",className:_.a.stationRadio,id:t,name:"stations",onChange:function(){return n(a)}}),Object(y.jsxs)("label",{className:_.a.stationLabel,htmlFor:t,children:[Object(y.jsx)("div",{className:_.a.stationName,children:a.name}),Object(y.jsxs)("div",{className:_.a.codecInfo,children:[a.codec," | ",a.metadataTypes.join(", ")]}),Object(y.jsx)("div",{className:_.a.stationDescription,children:a.description})]})]})},S=function(e){return e.stations.map((function(t,a){return Object(y.jsx)(v,{station:t,id:a,changeStation:e.changeStation},a)}))},k=a(58),w=a(34),j=a.n(w),O=a(22),T=a.n(O),x=function(){return Object(y.jsxs)("div",{className:T.a.about,children:[Object(y.jsx)("a",{className:T.a.mainLink,href:"https://github.com/eshaz/icecast-metadata-js",children:Object(y.jsx)("div",{children:"icecast-metadata-js"})}),Object(y.jsx)("div",{className:T.a.description,children:"Javascript library that reads, parses, and queues real-time metadata from an Icecast stream."}),Object(y.jsxs)("div",{className:T.a.headerLink,children:[Object(y.jsx)("a",{className:T.a.headerLink,style:{fontWeight:"bold"},href:"/",children:"React Demo"}),"\xa0\xa0 | \xa0\xa0",Object(y.jsx)("a",{className:T.a.headerLink,href:"".concat("/icecast-metadata-js","/demo.html"),children:"HTML Demo"}),"\xa0\xa0 | \xa0\xa0",Object(y.jsxs)("a",{className:T.a.headerLink,href:"".concat("/icecast-metadata-js","/bare-minimum-demo.html"),children:[Object(y.jsx)("i",{children:'"Bare Minimum"'})," \xa0HTML Demo"]})]})]})},A=a(4),E=a(8),M=a(1),R=a(2),q=a(10),P=a(3),D=a(5),C=a(33),L=function(){},z=new WeakMap,B="loading",I="playing",N="stopping",F="stopped",U="retrying",W={PLAY:"play",LOAD:"load",STREAM_START:"streamstart",STREAM:"stream",STREAM_END:"streamend",METADATA:"metadata",METADATA_ENQUEUE:"metadataenqueue",CODEC_UPDATE:"codecupdate",STOP:"stop",RETRY:"retry",RETRY_TIMEOUT:"retrytimeout",WARN:"warn",ERROR:"error"},Q=Symbol(),J=Symbol(),H=Symbol(),Y=Symbol(),V=Symbol(),G=Symbol(),K=Symbol(),Z=Symbol(),X=Symbol(),$=Symbol(),ee=Symbol(),te=Symbol(),ae=Symbol(),ne=Symbol(),ie=Symbol(),re=Symbol(),se=Symbol(),ce=Symbol(),oe=Symbol(),ue=Symbol(),de=function(){function e(){Object(M.a)(this,e),this._listeners=[]}return Object(R.a)(e,[{key:"hasEventListener",value:function(e,t){return this._listeners.some((function(a){return a.type===e&&a.listener===t}))}},{key:"addEventListener",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.hasEventListener(e,t)||this._listeners.push({type:e,listener:t,options:a}),this}},{key:"removeEventListener",value:function(e,t){var a=this._listeners.findIndex((function(a){return a.type===e&&a.listener===t}));return a>=0&&this._listeners.splice(a,1),this}},{key:"removeEventListeners",value:function(){return this._listeners=[],this}},{key:"dispatchEvent",value:function(e){var t=this;return this._listeners.filter((function(t){return t.type===e.type})).forEach((function(a){var n=a.type,i=a.listener,r=a.options.once;i.call(t,e),!0===r&&t.removeEventListener(n,i)})),this}}]),e}(),pe=a(16),le=a(15),he=a(62),me=a(31),ye=a(59),fe=function(){function e(t,a,n){Object(M.a)(this,e);var i=z.get(t);this._icecast=t,this._inputMimeType=a,this._codec=n,this._audioElement=i[H],this._icecastMetadataQueue=i[re],this._endpoint=i[Q];try{this._audioElement.removeAttribute("src"),this._audioElement.srcObject=null,window.MediaSource?this._audioElement.src=URL.createObjectURL(new MediaSource):this._audioElement.srcObject=new MediaStream}catch(r){this._audioElement.src="data:audio/mpeg;base64,//sQxAAABFgC/SCEYACCgB9AAAAAppppVCAHBAEIgBByw9WD5+J8ufwxiDEDsMfE+D4fwG/RUGCx6VO4awVxV3qDtQNPiXKnZUNSwKuUDR6IgaeoGg7Fg6pMQU1FMy4xMDCqqqqqqqr/+xLEB4PAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqo=",this._audioElement.loop=!0}}return Object(R.a)(e,[{key:"isAudioPlayer",get:function(){return!1}},{key:"metadataTimestamp",get:function(){return 0}},{key:"currentTime",get:function(){return 0}},{key:"reset",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onStream",value:function(e){return e}},{key:"onMetadata",value:function(e){this._icecastMetadataQueue.addMetadata(e,this.metadataTimestamp,this.currentTime)}}],[{key:"parseMimeType",value:function(e){return e.match(Object(ye.a)(/^(?:application\/|audio\/|)([A-Za-z]+)(?:$|; *codecs=(?:'|")([,A-Za-z]+)(?:'|"))/,{mime:1,codecs:2}))}},{key:"canPlayType",value:function(t,a,n){var i=e.parseMimeType(a),r=function(e){return e.reduce((function(e,a){if(""===e)return"";var n=t(a);return n?"maybe"===n||"maybe"===e?"maybe":!0===n||"probably"===n?"probably":void 0:""}),null)};if(i){var s=i.groups,c=s.mime,o=s.codecs,u=n&&n[c];if(!u||Array.isArray(u))return r(u||[a])||r(["audio/".concat(c)]);if("object"===typeof u){if(o){var d=o.split(",");return d.length>1?"":u[d[0]]?r(u[d[0]]):""}return"maybe"}}return""}}]),e}(),be=a(13),ge=a(9),_e=function(e){Object(P.a)(a,e);var t=Object(D.a)(a);function a(e){var n;return Object(M.a)(this,a),(n=t.call(this,e))._audioElement.crossOrigin="anonymous",n._audioElement.loop=!1,n._audioElement.preload="none",n.reset(),n}return Object(R.a)(a,[{key:"isAudioPlayer",get:function(){return!0}},{key:"metadataTimestamp",get:function(){return this._frame?(this._frame.totalDuration+this._metadataTimestampOffset)/1e3:0}},{key:"currentTime",get:function(){return this._audioLoadedTimestamp&&(performance.now()-this._audioLoadedTimestamp)/1e3}},{key:"reset",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._frame=null,this._metadataLoadedTimestamp=performance.now(),this._audioLoadedTimestamp=0,this._metadataTimestampOffset=0,this._firedPlay=!1,this._audioElement.removeAttribute("src"),this._audioElement.src=this._endpoint,this._icecast.state!==N&&this._icecast.state!==F&&(this._audioElement.addEventListener("playing",(function(){t._audioLoadedTimestamp=performance.now(),t._metadataTimestampOffset=performance.now()-t._metadataLoadedTimestamp}),{once:!0}),this._audioElement.play(),this._firedPlay||(this._icecast[ee](W.PLAY),this._firedPlay=!0));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onStream",value:function(e){this._frame=e[e.length-1]||this._frame}}],[{key:"canPlayType",value:function(e){return Object(be.a)(Object(ge.a)(a),"canPlayType",this).call(this,(function(e){return(new Audio).canPlayType(e)}),e)}},{key:"name",get:function(){return"html5"}}]),a}(fe),ve=a(21),Se=a(61),ke=function(){function e(t){Object(M.a)(this,e),this.CACHE_DURATION=3e5,this._icecast=t,this.initSync(),this.initQueue()}return Object(R.a)(e,[{key:"initSync",value:function(){this._syncQueue=[],this._alignIndex=0,this._syncIndex=0}},{key:"initQueue",value:function(){this._queue=[],this._queueDuration=0}},{key:"add",value:function(e){var t=e.crc32,a=e.duration;if(this._queue.push({crc32:t,duration:a}),this._queueDuration+=a,this._queueDuration>=this.CACHE_DURATION){var n=this._queue.shift().duration;this._queueDuration-=n}}},{key:"addAll",value:function(e){var t=this;e.forEach((function(e){return t.add(e)}))}},{key:"sync",value:function(e){var t;(t=this._syncQueue).push.apply(t,Object(A.a)(e));e:for(;this._alignIndex<this._queue.length;){for(;this._syncIndex<this._syncQueue.length&&this._alignIndex+this._syncIndex<this._queue.length;){if(this._syncQueue[this._syncIndex].crc32!==this._queue[this._alignIndex+this._syncIndex].crc32){this._syncIndex=0,this._alignIndex++;continue e}this._syncIndex++}break}if(this._alignIndex===this._queue.length){this._icecast[ee](W.WARN,"Reconnected successfully after retry event.","Found no overlapping frames from previous request.","Unable to sync old and new request.");var a=this._syncQueue;return this.initSync(),this.initQueue(),[a,!1]}var n=this._queue.length-this._alignIndex;if(this._syncQueue.length>n){this._icecast[ee](W.WARN,"Reconnected successfully after retry event.","Found ".concat(n," frames (").concat((this._queue.slice(this._alignIndex).reduce((function(e,t){return e+t.duration}),0)/1e3).toFixed(3)," seconds) of overlapping audio data in new request."),"Synchronized old and new request.");var i=this._syncQueue.slice(n);return this.initSync(),[i,!0]}return[[],!1]}}]),e}(),we=function(e){Object(P.a)(a,e);var t=Object(D.a)(a);function a(e,n,i){var r;return Object(M.a)(this,a),(r=t.call(this,e,n,i)).reset(),r._icecast.addEventListener(W.RETRY,(function(){r._syncState=ue})),r}return Object(R.a)(a,[{key:"isAudioPlayer",get:function(){return!0}},{key:"metadataTimestamp",get:function(){return this._mediaSource&&this._mediaSource.sourceBuffers.length&&Math.max(this._mediaSource.sourceBuffers[0].timestampOffset,this._mediaSource.sourceBuffers[0].buffered.length?this._mediaSource.sourceBuffers[0].buffered.end(0):0)||0}},{key:"currentTime",get:function(){return this._audioElement.currentTime}},{key:"reset",value:function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._syncState=ce,this._frameQueue=new ke(this._icecast),this._firedPlay=!1,this._mediaSourcePromise=this._prepareMediaSource(this._inputMimeType,this._codec),e.next=6,this._mediaSourcePromise;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onStream",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=t.flatMap((function(e){return e.codecFrames||e}))).length){e.next=9;break}switch(this._syncState){case ue:this._frameQueue.initSync(),this._syncState=oe;case oe:a=this._frameQueue.sync(t),n=Object(p.a)(a,1),(t=n[0]).length&&(this._syncState=ce)}return this._frameQueue.addAll(t),e.next=6,this._mediaSourcePromise;case 6:return e.t0=e.sent,e.next=9,(0,e.t0)(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareMediaSource",value:function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,i=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!MediaSource.isTypeSupported(t)){e.next=6;break}return e.next=3,this._createMediaSource(t);case 3:return e.abrupt("return",function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,s,c,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,n=!1,e.prev=2,s=Object(ve.a)(t);case 4:return e.next=6,s.next();case 6:return c=e.sent,a=c.done,e.next=10,c.value;case 10:if(o=e.sent,a){e.next=18;break}return d=o.data,e.next=15,i._appendSourceBuffer(d);case 15:a=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),n=!0,r=e.t0;case 24:if(e.prev=24,e.prev=25,a||null==s.return){e.next=29;break}return e.next=29,s.return();case 29:if(e.prev=29,!n){e.next=32;break}throw r;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}());case 6:if(n=new Se.a(t,{codec:a}),MediaSource.isTypeSupported(n.mimeType)){e.next=10;break}throw this._icecast[ee](W.ERROR,"Media Source Extensions API in your browser does not support ".concat(t," or ").concat(n.mimeType),"See: https://caniuse.com/mediasource and https://developer.mozilla.org/en-US/docs/Web/API/Media_Source_Extensions_API"),new Error("Unsupported Media Source Codec ".concat(n.mimeType));case 10:return e.next=12,this._createMediaSource(n.mimeType);case 12:return e.abrupt("return",function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,s,c,o,d,p;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,r=!1,e.prev=2,c=Object(ve.a)(n.iterator(t));case 4:return e.next=6,c.next();case 6:return o=e.sent,a=o.done,e.next=10,o.value;case 10:if(d=e.sent,a){e.next=18;break}return p=d,e.next=15,i._appendSourceBuffer(p);case 15:a=!0,e.next=4;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(2),r=!0,s=e.t0;case 24:if(e.prev=24,e.prev=25,a||null==c.return){e.next=29;break}return e.next=29,c.return();case 29:if(e.prev=29,!r){e.next=32;break}throw s;case 32:return e.finish(29);case 33:return e.finish(24);case 34:case"end":return e.stop()}}),e,null,[[2,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}());case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"_createMediaSource",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a._mediaSource=new MediaSource,a._audioElement.loop=!1,a._audioElement.src=URL.createObjectURL(a._mediaSource),a._mediaSource.addEventListener("sourceopen",t,{once:!0});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:this._sourceBufferRemoved=0,this._mediaSource.addSourceBuffer(t).mode="sequence";case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitForSourceBuffer",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t._mediaSource.sourceBuffers[0].addEventListener("updateend",e,{once:!0})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_appendSourceBuffer",value:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._icecast[ee](W.STREAM,t),this._mediaSource.sourceBuffers.length||this._icecast[ee](W.WARN,"Attempting to append audio, but MediaSource has not been or is no longer initialized","Please be sure that `detachAudioElement()` was called and awaited before reusing the element with a new IcecastMetadataPlayer instance"),this._icecast.state===N||!this._mediaSource.sourceBuffers.length){e.next=12;break}return this._firedPlay||(this._icecast[ee](W.PLAY),this._firedPlay=!0),this._mediaSource.sourceBuffers[0].appendBuffer(t),e.next=7,this._waitForSourceBuffer();case 7:if(!(this._audioElement.currentTime>10&&this._sourceBufferRemoved+1e4<Date.now())){e.next=12;break}return this._sourceBufferRemoved=Date.now(),this._mediaSource.sourceBuffers[0].remove(0,this._audioElement.currentTime-10),e.next=12,this._waitForSourceBuffer();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"canPlayType",value:function(e){try{new MediaSource}catch(t){return""}return MediaSource.isTypeSupported(e)?"probably":Object(be.a)(Object(ge.a)(a),"canPlayType",this).call(this,MediaSource.isTypeSupported,e,{mpeg:['audio/mp4;codecs="mp3"'],aac:['audio/mp4;codecs="mp4a.40.2"'],aacp:['audio/mp4;codecs="mp4a.40.2"'],ogg:{flac:['audio/mp4;codecs="flac"'],opus:['audio/mp4;codecs="opus"','audio/webm;codecs="opus"'],vorbis:['audio/webm;codecs="vorbis"']}})}},{key:"name",get:function(){return"mediasource"}}]),a}(fe),je=a(12),Oe=a(60),Te=function(e){Object(P.a)(a,e);var t=Object(D.a)(a);function a(e,n,i){var r;return Object(M.a)(this,a),(r=t.call(this,e,n,i))._icecast.addEventListener(W.RETRY,(function(){r._syncState=ue})),r.reset(),r._resetOggPageBuffer(),r}return Object(R.a)(a,[{key:"isAudioPlayer",get:function(){return!0}},{key:"metadataTimestamp",get:function(){return(this._currentSample+this._currentSampleOffset)/this._sampleRate}},{key:"currentTime",get:function(){return(Date.now()-this._startTime)/1e3||0}},{key:"reset",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._syncState=ce,this._syncSuccessful=!1,this._frameQueue=new ke(this._icecast),this._currentSample=0,this._currentSampleOffset=0,this._sampleRate=48e3,this._startTime=void 0,this._firedPlay=!1,this._audioContext&&this._audioContext.close(),this._audioContext=new(window.AudioContext||window.webkitAudioContext),this._mediaStream=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._mediaStream.stream,!this._opusDecoder){e.next=16;break}return e.next=15,this._opusDecoder.ready;case 15:this._opusDecoder.free();case 16:this._opusDecoder=new Oe.OpusDecoder({onDecodeAll:function(e){t._onDecode(e)}});case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onStream",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,i,r,s,c,o,d,l,h,m;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!0,n=!1,e.prev=2,r=Object(ve.a)(t);case 4:return e.next=6,r.next();case 6:return s=e.sent,a=s.done,e.next=10,s.value;case 10:if(c=e.sent,a){e.next=47;break}if(d=(o=c).rawData,0!==o.codecFrames.length){e.next=18;break}this._addOggPageBuffer(d),e.next=44;break;case 18:l=[o],e.t0=this._syncState,e.next=e.t0===ue?22:e.t0===oe?24:e.t0===ce?39:43;break;case 22:this._frameQueue.initSync(),this._syncState=oe;case 24:if(h=this._frameQueue.sync(l),m=Object(p.a)(h,2),l=m[0],this._syncSuccessful=m[1],!l.length){e.next=38;break}if(this._syncState=ce,!this._syncSuccessful){e.next=34;break}this._resetOggPageBuffer(),e.next=36;break;case 34:return e.next=36,this.reset();case 36:e.next=39;break;case 38:return e.abrupt("break",44);case 39:return this._oggPageBufferLength&&(this._addOggPageBuffer(d),d=this._getOggPageBuffer(),this._resetOggPageBuffer()),e.next=42,this._opusDecoder.ready;case 42:this._opusDecoder.decode(d);case 43:this._frameQueue.addAll(l);case 44:a=!0,e.next=4;break;case 47:e.next=53;break;case 49:e.prev=49,e.t1=e.catch(2),n=!0,i=e.t1;case 53:if(e.prev=53,e.prev=54,a||null==r.return){e.next=58;break}return e.next=58,r.return();case 58:if(e.prev=58,!n){e.next=61;break}throw i;case 61:return e.finish(58);case 62:return e.finish(53);case 63:case"end":return e.stop()}}),e,this,[[2,49,53,63],[54,,58,62]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_onDecode",value:function(e){var t=e.channelData,a=e.samplesDecoded;if(this._icecast.state!==N&&this._icecast.state!==F){this._startTime||(this._startTime=Date.now()),this.metadataTimestamp<this._audioContext.currentTime&&(this._currentSampleOffset+=Math.floor(this._audioContext.currentTime*this._sampleRate));var n=this._audioContext.createBuffer(t.length,a,this._sampleRate);t.forEach((function(e,t){return n.getChannelData(t).set(e)}));var i=this._audioContext.createBufferSource();i.buffer=n,i.connect(this._mediaStream),i.start(this.metadataTimestamp),this._firedPlay||(this._icecast[ee](W.PLAY),this._firedPlay=!0),this._currentSample+=a}}},{key:"_addOggPageBuffer",value:function(e){this._oggPageBuffer.push(e),this._oggPageBufferLength+=e.length}},{key:"_getOggPageBuffer",value:function(){var e,t=new Uint8Array(this._oggPageBufferLength),a=0,n=Object(je.a)(this._oggPageBuffer);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.set(i,a),a+=i.length}}catch(r){n.e(r)}finally{n.f()}return t}},{key:"_resetOggPageBuffer",value:function(){this._oggPageBuffer=[],this._oggPageBufferLength=0}}],[{key:"canPlayType",value:function(e){return window.WebAssembly&&(window.AudioContext||window.webkitAudioContext)&&window.MediaStream?Object(be.a)(Object(ge.a)(a),"canPlayType",this).call(this,(function(e){return'audio/ogg;codecs="opus"'===e}),e,{ogg:{opus:['audio/ogg;codecs="opus"']}}):""}},{key:"name",get:function(){return"webaudio"}}]),a}(fe),xe=function(){function e(t,a){Object(M.a)(this,e);var n=z.get(t);this._icecast=t,this._audioElement=n[H],this._endpoint=n[Q],this._metadataTypes=n[J],this._icyMetaInt=n[Y],this._icyDetectionTimeout=n[V],this._hasIcy=n[ie],this._preferredPlaybackMethod=a||"mediasource",this._playbackMethod="",this._player=new fe(this._icecast),this._unprocessedFrames=[],this._codecParser=void 0,this._inputMimeType="",this._codec=""}return Object(R.a)(e,[{key:"player",get:function(){return this._player}},{key:"playbackMethod",get:function(){return this._playbackMethod}},{key:"icyMetaInt",get:function(){return this._icecastReadableStream&&this._icecastReadableStream.icyMetaInt}},{key:"playStream",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.fetchStream().then(function(){var e=Object(d.a)(u.a.mark((function e(a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._icecast[ee](W.STREAM_START),e.abrupt("return",t.readIcecastResponse(a).finally((function(){t._icecast[ee](W.STREAM_END)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStream",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(this._endpoint,{method:"GET",headers:this._hasIcy?{"Icy-MetaData":1}:{},signal:z.get(this._icecast)[se].signal});case 2:if((t=e.sent).ok){e.next=7;break}throw(a=new Error("".concat(t.status," received from ").concat(t.url))).name="HTTP Response Error",a;case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readIcecastResponse",value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,i,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("content-type"),n=new Promise((function(e){r._codecParser=new me.a(a,{onCodecUpdate:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r._icecast)[ee].apply(e,[W.CODEC_UPDATE].concat(a))},onCodec:e})})),this._icecastReadableStream=new C.b(t,{onMetadata:function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r._player.onMetadata(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onStream:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.stream,r._icecast[ee](W.STREAM,a),n=Object(A.a)(r._codecParser.iterator(a)),!r._player.isAudioPlayer){e.next=9;break}return e.next=6,r._player.onStream([].concat(Object(A.a)(r._unprocessedFrames),Object(A.a)(n)));case 6:r._unprocessedFrames=[],e.next=10;break;case 9:(i=r._unprocessedFrames).push.apply(i,Object(A.a)(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r._icecast)[ee].apply(e,[W.WARN].concat(a))},metadataTypes:this._metadataTypes,icyMetaInt:this._icyMetaInt,icyDetectionTimeout:this._icyDetectionTimeout}),i=this._icecastReadableStream.startReading(),this._player.isAudioPlayer){e.next=11;break}return e.t0=this,e.t1=a,e.next=9,n;case 9:e.t2=e.sent,e.t0._buildPlayer.call(e.t0,e.t1,e.t2);case 11:return e.next=13,i;case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_buildPlayer",value:function(e,t){for(var a={mediasource:we,webaudio:Te,html5:_e},n=this._preferredPlaybackMethod,i=a[n],r=Object(le.a)(a,[n].map(he.a)),s=0,c=Object.values(Object(pe.a)({firstMethod:i},r));s<c.length;s++){var o=c[s],u=o.canPlayType("".concat(e,';codecs="').concat(t,'"'));if("probably"===u||"maybe"===u){this._playbackMethod=o.name,this._player=new o(this._icecast,e,t);break}}if(!this._player)throw new Error("Your browser does not support this audio codec ".concat(e).concat(t&&';codecs="'.concat(t,'"')))}}]),e}();try{new EventTarget,n=EventTarget}catch(We){n=de}var Ae=Symbol(),Ee=Symbol(),Me=Symbol(),Re=Symbol(),qe=Symbol(),Pe=Symbol(),De=Symbol(),Ce=Symbol(),Le=Symbol(),ze=Symbol(),Be=Symbol(),Ie=Symbol(),Ne=Symbol(),Fe=function(e){Object(P.a)(a,e);var t=Object(D.a)(a);function a(e){var n,i,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(M.a)(this,a),r=t.call(this),z.set(Object(q.a)(r),(i={},Object(E.a)(i,Q,e),Object(E.a)(i,H,s.audioElement||new Audio),Object(E.a)(i,Y,s.icyMetaInt),Object(E.a)(i,V,s.icyDetectionTimeout),Object(E.a)(i,J,s.metadataTypes||["icy"]),Object(E.a)(i,ie,(s.metadataTypes||["icy"]).includes("icy")),Object(E.a)(i,G,s.enableLogging||!1),Object(E.a)(i,K,(s.retryDelayRate||.1)+1),Object(E.a)(i,Z,1e3*(s.retryDelayMin||.5)),Object(E.a)(i,X,1e3*(s.retryDelayMax||2)),Object(E.a)(i,$,1e3*(s.retryTimeout||30)),Object(E.a)(i,Ae,s.playbackMethod),Object(E.a)(i,Re,(n={},Object(E.a)(n,W.PLAY,s.onPlay||L),Object(E.a)(n,W.LOAD,s.onLoad||L),Object(E.a)(n,W.STREAM_START,s.onStreamStart||L),Object(E.a)(n,W.STREAM,s.onStream||L),Object(E.a)(n,W.STREAM_END,s.onStreamEnd||L),Object(E.a)(n,W.METADATA,s.onMetadata||L),Object(E.a)(n,W.METADATA_ENQUEUE,s.onMetadataEnqueue||L),Object(E.a)(n,W.CODEC_UPDATE,s.onCodecUpdate||L),Object(E.a)(n,W.STOP,s.onStop||L),Object(E.a)(n,W.RETRY,s.onRetry||L),Object(E.a)(n,W.RETRY_TIMEOUT,s.onRetryTimeout||L),Object(E.a)(n,W.WARN,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r[ne](console.warn,s.onWarn,t)})),Object(E.a)(n,W.ERROR,(function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];r[ne](console.error,s.onError,t)})),n)),Object(E.a)(i,re,new C.a({onMetadataUpdate:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r)[ee].apply(e,[W.METADATA].concat(a))},onMetadataEnqueue:function(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r)[ee].apply(e,[W.METADATA_ENQUEUE].concat(a))}})),Object(E.a)(i,Be,(function(){clearTimeout(z.get(Object(q.a)(r))[Ne]),r.removeEventListener(W.STREAM_START,z.get(Object(q.a)(r))[Be]),z.get(Object(q.a)(r))[H].removeEventListener("waiting",z.get(Object(q.a)(r))[ze]),r.state!==U&&(z.get(Object(q.a)(r))[H].pause(),z.get(Object(q.a)(r))[re].purgeMetadataQueue(),z.get(Object(q.a)(r))[Me]=z.get(Object(q.a)(r))[Ee].player.reset())})),Object(E.a)(i,De,(function(){r.play()})),Object(E.a)(i,Pe,(function(){r.stop()})),Object(E.a)(i,Ce,(function(){var e=z.get(Object(q.a)(r))[H];(r.state===B||!e.loop&&r.state!==N&&r.state!==F)&&(e.play(),r[qe]=I)})),Object(E.a)(i,Le,(function(e){r.state!==U?(r[ee](W.ERROR,"The audio element encountered an error",{1:"MEDIA_ERR_ABORTED The fetching of the associated resource was aborted by the user's request.",2:"MEDIA_ERR_NETWORK Some kind of network error occurred which prevented the media from being successfully fetched, despite having previously been available.",3:"MEDIA_ERR_DECODE Despite having previously been determined to be usable, an error occurred while trying to decode the media resource, resulting in an error.",4:"MEDIA_ERR_SRC_NOT_SUPPORTED The associated resource or media provider object (such as a MediaStream) has been found to be unsuitable.",5:"MEDIA_ERR_ENCRYPTED"}[e.target.error.code]||"Code: ".concat(e.target.error.code),"Message: ".concat(e.target.error.message)),r.stop()):z.get(Object(q.a)(r))[Be]()})),i)),r[te](),r[qe]=F,z.get(Object(q.a)(r))[Ee]=new xe(Object(q.a)(r),z.get(Object(q.a)(r))[Ae]),r}return Object(R.a)(a,[{key:"audioElement",get:function(){return z.get(this)[H]}},{key:"icyMetaInt",get:function(){return z.get(this)[Ee].icyMetaInt}},{key:"metadataQueue",get:function(){return z.get(this)[re].metadataQueue}},{key:"state",get:function(){return z.get(this)[qe]}},{key:"playbackMethod",get:function(){return z.get(this)[Ee].playbackMethod}},{key:qe,set:function(e){this.dispatchEvent(new CustomEvent(e)),z.get(this)[qe]=e}},{key:te,value:function(){var e=z.get(this)[H];e.addEventListener("pause",z.get(this)[Pe]),e.addEventListener("play",z.get(this)[De]),e.addEventListener("canplay",z.get(this)[Ce]),e.addEventListener("error",z.get(this)[Le])}},{key:"detachAudioElement",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=z.get(this)[H]).removeEventListener("pause",z.get(this)[Pe]),t.removeEventListener("play",z.get(this)[De]),t.removeEventListener("canplay",z.get(this)[Ce]),t.removeEventListener("error",z.get(this)[Le]),e.next=7,this.stop();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"play",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t,a=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state!==F){e.next=8;break}return z.get(this)[se]=new AbortController,this[qe]=B,this[ee](W.LOAD),(t=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",z.get(a)[Ee].playStream().catch(function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("AbortError"===n.name){e.next=8;break}return e.next=3,a[ae](n);case 3:if(!e.sent){e.next=6;break}return a[ee](W.RETRY),e.abrupt("return",t());case 6:z.get(a)[se].abort(),z.get(a)[qe]!==N&&z.get(a)[qe]!==F&&a[ee](W.ERROR,n.message.match(/network|fetch|offline|codec/i)?n:n.stack);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}())().finally((function(){z.get(a)[Be](),a[ee](W.STOP),a[qe]=F})),e.next=8,new Promise((function(e){a.addEventListener(W.PLAY,e,{once:!0})}));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(d.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state===F||this.state===N){e.next=5;break}return this[qe]=N,z.get(this)[se].abort(),e.next=5,new Promise((function(e){t.addEventListener(W.STOP,e,{once:!0})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:ae,value:function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==z.get(this)[$]){e.next=2;break}return e.abrupt("return",!1);case 2:if(z.get(this)[qe]!==U){e.next=6;break}return e.next=5,new Promise((function(e){n.addEventListener(N,e,{once:!0});var t=Math.min(z.get(n)[Z]*Math.pow(z.get(n)[K],z.get(n)[Ie]++),z.get(n)[X]);setTimeout((function(){n.removeEventListener(N,e),e()}),t+.3*t*Math.random())}));case 5:return e.abrupt("return",z.get(this)[qe]===U);case 6:if(z.get(this)[qe]===N||z.get(this)[qe]===F||!t.message.match(/network|fetch|offline|Error in body stream/i)&&"HTTP Response Error"!==t.name){e.next=15;break}return this[ee](W.ERROR,t),this[qe]=U,this.addEventListener(W.STREAM_START,z.get(this)[Be],{once:!0}),z.get(this)[ie]&&this[ee](W.WARN,"This stream was requested with ICY metadata.",'If there is a CORS preflight failure, try removing "icy" from the metadataTypes option.',"See https://github.com/eshaz/icecast-metadata-js#cors for more details."),a=new Promise((function(e){z.get(n)[ze]=e,z.get(n)[H].addEventListener("waiting",z.get(n)[ze],{once:!0})})),z.get(this)[Ne]=setTimeout((function(){a.then((function(){z.get(n)[qe]===U&&(n[ee](W.RETRY_TIMEOUT),n.stop())}))}),z.get(this)[$]),z.get(this)[Ie]=0,e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:ee,value:function(e){for(var t,a=arguments.length,n=new Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];this.dispatchEvent(new CustomEvent(e,{detail:n})),(t=z.get(this)[Re])[e].apply(t,n)}},{key:ne,value:function(e,t,a){z.get(this)[G]&&e("icecast-metadata-js",a.reduce((function(e,t){return e+"\n  "+t}),"")),t&&t.apply(void 0,Object(A.a)(a))}}],[{key:"canPlayType",value:function(e){return{mediasource:we.canPlayType(e),html5:_e.canPlayType(e),webaudio:Te.canPlayType(e)}}}]),a}(n),Ue=function(){var e=Object(i.useState)(),t=Object(p.a)(e,2),a=t[0],n=t[1],r=Object(i.useState)(!1),s=Object(p.a)(r,2),c=s[0],o=s[1],h=Object(i.useState)(new Audio),m=Object(p.a)(h,1)[0],f=Object(i.useState)("Select a station"),g=Object(p.a)(f,2),_=g[0],v=g[1],w=Object(i.useState)(),O=Object(p.a)(w,2),T=O[0],A=O[1],E=Object(i.useRef)(),M=Object(i.useState)(),R=Object(p.a)(M,2),q=R[0],P=R[1],D=Object(i.useCallback)(function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=4;break}return e.next=3,T.stop();case 3:T.detachAudioElement();case 4:(a=new Fe(t.endpoint,{onMetadata:function(e){console.log(e),v(e)},onPlay:function(){o(!0)},onStop:function(){o(!1),v("Select a station or press play")},onLoad:function(){o(!0),v("Loading...")},onError:function(e){v((null===e||void 0===e?void 0:e.message)||e)},onRetry:function(){v("Lost Connection. Reconnecting...")},onStreamStart:function(){v("Waiting for metadata...")},icyDetectionTimeout:5e3,enableLogging:!0,metadataTypes:t.metadataTypes,audioElement:m})).play(),A(a),n(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[T,m]),C=Object(i.useCallback)((function(){c?T.stop():T.play()}),[T,c]);return Object(i.useEffect)((function(){P(new l.a(E.current,{source:m,showScaleX:!1,fftSize:32768,mode:1,gradient:"prism",showBgColor:!1,barSpace:0,lumiBars:!0}))}),[m]),Object(i.useLayoutEffect)((function(){var e=new ResizeObserver((function(){q&&q.setCanvasSize(window.innerWidth,window.innerHeight+100)}));return e.observe(E.current),function(){return e.disconnect()}}),[q]),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:j.a.spectrum,ref:E}),Object(y.jsx)("header",{className:j.a.header,children:Object(y.jsx)(x,{})}),Object(y.jsx)("main",{children:Object(y.jsx)(S,{stations:k,changeStation:D})}),Object(y.jsx)("footer",{className:j.a.footer,children:Object(y.jsx)(b,{station:a,toggle:C,playing:c,metadata:_})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(y.jsx)(r.a.StrictMode,{children:Object(y.jsx)(Ue,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[96,1,2]]]);
//# sourceMappingURL=main.e1585595.chunk.js.map